var KAIOPUA=(function(s){window.console=window.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}};var T=s.shared=s.shared||{};T.domElements={};T.supports={webGL:true};T.throttled={};T.spawns={};T.pointers=[];T.originLink=window.location.pathname.toString();T.pathToIcons="img/";T.pathToAssets="asset/";T.frameRateMax=60;T.frameRateMin=20;T.time=new Date().getTime();T.timeLast=T.time;T.timeDeltaExpected=1000/60;T.timeDeltaModDec=Math.pow(10,2);T.pointerWheelSpeed=120;T.pointerHoldPositionShift=10;T.pointerInGame=true;T.throttleTimeShort=T.timeDeltaExpected*3;T.throttleTimeMedium=100;T.throttleTimeLong=250;T.throttleTimeLong=250;T.focused=true;T.errorString="error";T.errorTypeGeneral="General";T.errorTypes=[T.errorTypeGeneral,"WebGLBrowser","WebGLComputer"];T.errorTypesOnlyOnce=["WebGLBrowser","WebGLComputer"];T.fadeBetweenSections=false;T.domFadeDuration=500;T.domCollapseDuration=500;T.domFadeEasing="easeInOutCubic";T.domCollapseEasing="easeInOutCubic";T.screenWidth=0;T.screenHeight=0;T.screenViewableWidth=0;T.screenViewableHeight=0;T.screenOffsetTop=0;T.screenOffsetBottom=0;T.screenOffsetLeft=0;T.screenOffsetRight=0;var P={},G={},l,t,am,W,a3,z,az,a9,al,aL=false,aP=false,B=false,ax=false,aJ=false,aO=false,bc=500,aH=["js/lib/RequestAnimationFrame.js","js/lib/RequestInterval.js","js/lib/RequestTimeout.js","js/lib/signals.min.js","js/lib/jquery-1.8.2.min.js"],bd=["js/lib/hammer.custom.js","js/lib/bootstrap.min.js","js/lib/jquery.easing-1.3.min.js","js/lib/jquery.throttle-debounce.custom.min.js","js/lib/jquery.placeholdme.js"],aY=["js/kaiopua/utils/ErrorHandler.js","js/kaiopua/ui/UI.js","js/kaiopua/utils/KeyHelper.js"],ar=["js/lib/three/three.min.js","js/lib/Tween.custom.min.js"],S=["js/lib/three/ThreeOctree.min.js","js/lib/three/postprocessing/ShaderExtras.js","js/lib/three/postprocessing/EffectComposer.js","js/lib/three/postprocessing/RenderPass.js","js/lib/three/postprocessing/MaskPass.js","js/lib/three/postprocessing/ShaderPass.js"],h=["js/kaiopua/core/Scene.js","js/kaiopua/core/CameraControls.js"],ap=["js/kaiopua/sections/Launcher.js"],Q=["js/kaiopua/sections/Start.js"];$LAB.script(aH).wait().script(bd).wait(av);function av(){T.domElements.$game=$("#game");T.supports.pointerEvents=aD("pointer-events");T.signals={onFocusLost:new signals.Signal(),onFocusGained:new signals.Signal(),onKeyPressed:new signals.Signal(),onKeyReleased:new signals.Signal(),onGameInput:new signals.Signal(),onWindowResized:new signals.Signal(),onUpdated:new signals.Signal(),onWorkerReset:new signals.Signal(),onWorkerTaskStarted:new signals.Signal(),onWorkerTaskCompleted:new signals.Signal(),onWorkerTasksCompleted:new signals.Signal(),onLoadItemCompleted:new signals.Signal(),onLoadListCompleted:new signals.Signal(),onLoadAllCompleted:new signals.Signal(),onAssetReady:new signals.Signal(),onGameStateChange:new signals.Signal(),onGamePlayable:new signals.Signal(),onGameReady:new signals.Signal(),onGamePaused:new signals.Signal(),onGameResumed:new signals.Signal(),onGameUpdated:new signals.Signal(),onGameStarted:new signals.Signal(),onGameStartedCompleted:new signals.Signal(),onGameStopped:new signals.Signal(),onGameStoppedCompleted:new signals.Signal(),onGamePointerLeft:new signals.Signal(),onGamePointerEntered:new signals.Signal(),onGamePointerMoved:new signals.Signal(),onGamePointerTapped:new signals.Signal(),onGamePointerDoubleTapped:new signals.Signal(),onGamePointerHeld:new signals.Signal(),onGamePointerDragStarted:new signals.Signal(),onGamePointerDragged:new signals.Signal(),onGamePointerDragEnded:new signals.Signal(),onGamePointerWheel:new signals.Signal()};$(document).on("keydown",ai).on("keyup",ad);T.throttled.reposition_pointer=$.throttle(T.throttleTimeShort,U);T.throttled.on_window_resized=$.throttle(T.throttleTimeLong,ah);$(window).on("mousemove",T.throttled.reposition_pointer).on("blur",k).on("focus",a2).on("resize",T.throttled.on_window_resized);window.onerror=aT;T.signals.onFocusLost.add(function(){if(aJ!==true){aO=true}aj(true)});T.signals.onFocusGained.add(function(){if(aO===true){aO=false;a7(true)}});P.active=false;P.listCount=0;P.lists=[];P.listLocations={};P.listLoaded={};P.listMessages={};P.listCallbacks={};P.loading=[];P.loadingListIDs=[];P.started=[];P.loaded=[];P.loadingOrLoaded=[];P.listCurrent="";P.loadTypeBase="script";P.tips=[];N(aH);N(bd);G.taskCount=0;G.tasksStarted=[];G.tasksCompleted=[];a4();s.type=ae;s.is_number=a5;s.is_array=bi;s.is_image=b;s.is_image_ext=a6;s.is_event=aC;s.extend=at;s.time_test=M;s.to_array=a8;s.ensure_not_array=c;s.array_cautious_add=n;s.array_cautious_remove=aQ;s.array_random_value=ao;s.array_random_value_remove=aW;s.index_of_value=Y;s.last_index_of_value=aB;s.indices_of_value=u;s.index_of_values=y;s.index_of_property=aV;s.indices_of_property=au;s.index_of_properties=f;s.css_property_supported=aD;s.str_to_camel=aU;s.str_to_title=X;s.dom_extract=aK;s.dom_generate_image=ac;s.dom_ignore_pointer=A;s.dom_fade=a0;s.dom_collapse=ay;s.get_pointer=aq;s.reposition_pointer=U;s.worker_reset=a4;s.worker_task_start=r;s.worker_task_complete=aS;s.load=i;s.get_is_loaded=q;s.get_is_loading=x;s.get_is_loading_or_loaded=aM;s.get_asset_path=O;s.get_ext=aR;s.add_default_ext=w;s.remove_ext=F;s.get_alt_path=a;s.asset_register=af;s.asset_require=bb;s.asset_ready=ag;s.set_asset=D;s.get_asset=aw;s.get_asset_data=d;s.set_section=I;s.start=v;s.stop=aN;s.resume=a7;s.pause=aj;Object.defineProperty(s,"paused",{get:function(){return aJ}});Object.defineProperty(s,"started",{get:function(){return ax}});Object.defineProperty(s,"setup",{get:function(){return aL}});Object.defineProperty(s,"playable",{get:function(){return aP}});Object.defineProperty(s,"ready",{get:function(){return B},set:function(bj){if(B!==bj){B=bj;T.signals.onGameReady.dispatch(B);T.signals.onGameStateChange.dispatch(B)}}});Object.defineProperty(s,"focusLost",{get:function(){return aO}});$(window).trigger("resize");R();bb(aY,bh,true)}function bh(bj,bk,bl){console.log("GAME: compatiblity check");l=bj;a3=bk;W=bl;if(l.errorState){T.supports.webGL=false;T.signals.onGameStateChange.dispatch();l.process()}else{E()}}function E(){s.asset_require(ar,[ab],true)}function ab(){s.asset_require(S,[K,aI],true)}function aI(){s.asset_require(h,[ba,bf],true)}function bf(){s.asset_require(ap,[be,a1],true)}function a1(){s.asset_require(Q,aX,true)}function K(){console.log("GAME: foundation");T.universeGravitySource=new THREE.Vector3(0,0,0);T.universeGravityMagnitude=new THREE.Vector3(0,-0.4,0);T.cardinalAxes={up:new THREE.Vector3(0,1,0),forward:new THREE.Vector3(0,0,1),right:new THREE.Vector3(-1,0,0)};T.renderer=new THREE.WebGLRenderer({clearColor:0,clearAlpha:0,maxLights:8});T.renderer.setSize(T.gameWidth,T.gameHeight);T.renderer.autoClear=false;T.renderTarget=new THREE.WebGLRenderTarget(T.gameWidth,T.gameHeight,{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter})}function ba(bj,bk){console.log("GAME: setup");t=bj;am=bk;T.scene=new t.Instance();T.sceneBG=new t.Instance();T.scene.fog=undefined;s.physics=T.scene.physics;T.camera=new THREE.PerspectiveCamera(60,T.gameWidth/T.gameHeight,1,20000);T.cameraBG=new THREE.PerspectiveCamera(60,T.gameWidth/T.gameHeight,1,20000);T.camera.useQuaternion=T.cameraBG.useQuaternion=true;T.cameraControls=new am.Instance({camera:T.camera});T.cameraControls.onCameraMoved.add($.throttle(T.throttleTimeMedium,function(){T.domElements.$game.triggerHandler("mousemove")}));al={bg:new THREE.RenderPass(T.sceneBG,T.cameraBG),env:new THREE.RenderPass(T.scene,T.camera),screen:new THREE.ShaderPass(THREE.ShaderExtras.screen)};al.env.clear=false;al.screen.renderToScreen=true;a9=new THREE.EffectComposer(T.renderer,T.renderTarget);a9.addPass(al.bg);a9.addPass(al.env);a9.addPass(al.screen);T.domElements.$game.prepend(T.renderer.domElement);T.throttled.on_game_pointer_moved=$.throttle(T.throttleTimeShort,C);T.throttled.on_game_pointer_dragged=$.throttle(T.throttleTimeShort,true,L);T.domElements.$game.on("mouseleave",e).on("mouseenter",ak).on("mousemove",T.throttled.on_game_pointer_moved).on("tap",aF).on("doubletap",an).on("hold",g).on("dragstart",j).on("drag",T.throttled.on_game_pointer_dragged).on("dragend",Z).on("mousewheel DOMMouseScroll",aA).on("contextmenu",aE);aL=true;ah()}function be(bj){z=bj;I(z)}function aX(bj){console.log("GAME: playable");az=bj;aP=true;T.signals.onGamePlayable.dispatch();T.signals.onGameStateChange.dispatch()}function I(bl,bn){var bm=T.fadeBetweenSections,bk=false,bj=function(){if(typeof T.sectionLast!=="undefined"){T.sectionLast.remove()}bl.show();T.section=bl;if(bm!==false){s.dom_fade({element:T.domElements.$uiBlocker})}a7();if(typeof bn!=="undefined"){bn.call()}};aj(true);if(typeof T.section!=="undefined"){bk=true;T.sectionLast=T.section;T.sectionLast.hide();if(bm!==false){s.dom_fade({element:T.domElements.$uiBlocker,opacity:1})}}T.section=undefined;if(typeof startedValue!=="undefined"){ax=startedValue}if(typeof bl!=="undefined"){if(bm!==false&&bk===true){window.requestTimeout(function(){bj()},bc)}else{bj()}}}function v(){if(aP===true){if(ax===false){console.log("GAME: START");ax=true;T.signals.onGameStarted.dispatch();I(az,function(){T.signals.onGameStartedCompleted.dispatch()})}else{a7()}}}function aN(){if(aP===true){console.log("GAME: STOP");ax=false;T.signals.onGameStopped.dispatch();I(z,function(){T.signals.onGameStoppedCompleted.dispatch()})}}function aj(bj,bk){if(aJ===false){console.log("GAME: PAUSE");aJ=true;T.signals.onGamePaused.dispatch(bj,bk);aa()}}function a7(bj){if(aJ===true&&(l.errorState!==true||ax!==true)){console.log("GAME: RESUME");aJ=false;T.signals.onGameResumed.dispatch(bj)}}function R(){var bj,bk;window.requestAnimationFrame(R);T.timeLast=T.time;T.time=new Date().getTime();bj=T.time-T.timeLast;bk=Math.round((bj/T.timeDeltaExpected)*T.timeDeltaModDec)/T.timeDeltaModDec;if(a5(bk)!==true){bk=1}T.signals.onUpdated.dispatch(bj,bk);if(aJ!==true&&aL===true){TWEEN.update();if(s.physics){s.physics.update(bj,bk)}T.signals.onGameUpdated.dispatch(bj,bk);aa()}}function aa(){if(aL===true){T.cameraControls.update();T.cameraBG.quaternion.copy(T.camera.quaternion);T.renderer.setViewport(0,0,T.gameWidth,T.gameHeight);T.renderer.clear();a9.render()}}function ae(bj){return bj===null?bj+"":Object.prototype.toString.call(bj).slice(8,-1).toLowerCase()}function bi(bj){return Object.prototype.toString.call(bj)==="[object Array]"}function a5(bj){return !isNaN(bj)&&isFinite(bj)&&typeof bj!=="boolean"}function b(bj){return(typeof bj!=="undefined"&&bj.hasOwnProperty("nodeName")&&bj.nodeName.toLowerCase()==="img")}function a6(bj){if(bj==="jpg"||bj==="jpeg"||bj==="png"||bj==="gif"||bj==="bmp"){return true}else{return false}}function aC(bj){return bj&&(bj.type&&(bj.target||bj.srcElement))}function at(bj,bx,bz,br){var bu,bs,bp,bm,bl,by,bt,bv,bq,bo,bn,bk,bw;if(typeof bj!=="undefined"){bx=s.type(bx)==="object"?bx:{};bp=Object.getOwnPropertyNames(bj);for(bu=0,bs=bp.length;bu<bs;bu++){bm=bp[bu];bl=Object.getOwnPropertyDescriptor(bj,bm);if(bx.hasOwnProperty(bm)){delete bx[bm]}Object.defineProperty(bx,bm,bl);if(bz===true){bl=Object.getOwnPropertyDescriptor(bx,bm);by=bl.value;bt=ae(by);if(bt==="object"||bt==="array"){br=br||{sources:[],copies:[]};bv=br.sources;bq=br.copies;bo=Y(bv,by);if(bo===-1){bk=bv[bv.length]=by;bw=bq[bq.length]=(bt==="object"?{}:[]);if(by===bj){by[bm]=bw}bl.value=at(by,bw,true,br)}else{bl.value=bq[bo]}Object.defineProperty(bx,bm,bl)}}}}return bx}function M(bn,bp,bo){var bm,bl,bk,bj;bp=a5(bp)&&bp>0?bp:1;bo=typeof bo==="string"?bo:"";bl=new Date().getTime();for(bm=0;bm<bp;bm++){bj=bn.call()}bk=new Date().getTime();console.log(bo," > time test ( x",bp,"): ",(bk-bl));return bj}function a8(bj){return bj?(bi(bj)!==true?[bj]:bj):[]}function c(bk,bj){return bi(bk)===true?bk[bj||0]:bk}function n(bp,bo){var bm,bj,bl,bk,bn=false;bp=a8(bp);bo=a8(bo);for(bm=0,bj=bo.length;bm<bj;bm++){bl=bo[bm];bk=Y(bp,bl);if(bk===-1){bp.push(bl);bn=true}}return bn}function aQ(bp,bn){var bm,bj,bl,bk,bo=false;bp=a8(bp);bn=a8(bn);for(bm=0,bj=bn.length;bm<bj;bm++){bl=bn[bm];bk=Y(bp,bl);if(bk!==-1){bp.splice(bk,1);bo=true}}return bo}function ao(bj){return bj[Math.round(Math.random()*(bj.length-1))]}function aW(bj){return bj.splice(Math.round(Math.random()*(bj.length-1)),1)[0]}function Y(bm,bl){for(var bk=0,bj=bm.length;bk<bj;bk++){if(bl===bm[bk]){return bk}}return -1}function aB(bl,bk){for(var bj=bl.length-1;bj>=0;bj--){if(bk===bl[bj]){return bj}}return -1}function u(bn,bl){var bm=[];for(var bk=0,bj=bn.length;bk<bj;bk++){if(bl===bn[bk]){bm.push(bk)}}return bm}function y(bm,bk){for(var bl=0,bj=bm.length;bl<bj;bl++){if(Y(bk,bm[bl])!==-1){return bl}}return -1}function aV(bn,bm,bl){for(var bk=0,bj=bn.length;bk<bj;bk++){if(bl===bn[bk][bm]){return bk}}return -1}function au(bo,bm,bl){var bn=[];for(var bk=0,bj=bo.length;bk<bj;bk++){if(bl===bo[bk][bm]){bn.push(bk)}}return bn}function f(bp,bo,bk){for(var bn=0,bj=bp.length;bn<bj;bn++){for(var bl=0,bm=bo.length;bl<bm;bl++){if(bk[bl]===bp[bn][bo[bl]]){return bn}}}return -1}function aq(bj){bj=bj||{};var bl=bj.identifier=(bj.identifier?bj.identifier:0),bk=T.pointers[bl];if(typeof bk==="undefined"){bk=T.pointers[bl]={};bk.id=bl;bk.x=bk.lx=T.screenWidth*0.5;bk.y=bk.ly=T.screenHeight*0.5;bk.deltaX=bk.deltaY=bk.angle=bk.distance=bk.distanceX=bk.distanceY=0;bk.direction="none"}return bk}function U(bl){T.timeSinceInteraction=0;var bn=s.get_pointer(bl),bk,bm,bj;if(bl){bk=bl.position;if(bi(bk)&&bk[bn.id]){bk=bk[bn.id]}if(typeof bk==="undefined"){bm=document;bj=bm.body;bk={x:bn.x,y:bn.y};if(typeof bl.pageX!=="undefined"){bk.x=bl.pageX}else{if(typeof bl.clientX!=="undefined"){bk.x=bl.clientX+(bm&&bm.scrollLeft||bj&&bj.scrollLeft||0)-(bm&&bm.clientLeft||bj&&bj.clientLeft||0)}}if(typeof bl.pageY!=="undefined"){bk.y=bl.pageY}else{if(typeof bl.clientY!=="undefined"){bk.y=bl.clientY+(bm&&bm.scrollTop||bj&&bj.scrollTop||0)-(bm&&bm.clientTop||bj&&bj.clientTop||0)}}}if(bn.x!==bk.x||bn.y!==bk.y){bn.x=bk.x||bn.x;bn.y=bk.y||bn.y;bn.deltaX=bn.x-bn.lx;bn.deltaY=bn.y-bn.ly;bn.lx=bn.x;bn.ly=bn.y;bn.angle=bl.angle||0;bn.direction=bl.direction||"none"}}return bn}function e(bj){T.pointerInGame=false;T.signals.onGamePointerLeft.dispatch(bj)}function ak(bj){T.pointerInGame=true;T.signals.onGamePointerEntered.dispatch(bj)}function C(bj){if(T.pointerInGame===true){T.signals.onGamePointerMoved.dispatch(bj);J(bj)}}function aF(bj){T.signals.onGamePointerTapped.dispatch(bj,U(bj));J(bj)}function an(bj){T.signals.onGamePointerDoubleTapped.dispatch(bj,U(bj));J(bj)}function g(bj){T.signals.onGamePointerHeld.dispatch(bj,U(bj));J(bj)}function j(bj){T.signals.onGamePointerDragStarted.dispatch(bj,s.get_pointer(bj));J(bj)}function L(bj){T.signals.onGamePointerDragged.dispatch(bj,s.get_pointer(bj));J(bj)}function Z(bj){T.signals.onGamePointerDragEnded.dispatch(bj,s.get_pointer(bj));J(bj)}function aA(bk){var bj=bk.originalEvent||bk;bk.wheelDelta=bj.wheelDelta=((bj.detail<0||bj.wheelDelta>0)?1:-1)*T.pointerWheelSpeed;T.signals.onGamePointerWheel.dispatch(bk);J(bk);bk.preventDefault()}function aE(bj){bj.preventDefault()}function ai(bj){T.signals.onKeyPressed.dispatch(bj);J(bj)}function ad(bj){T.signals.onKeyReleased.dispatch(bj);J(bj)}function J(bn){var bm,bk,bl,bj;if(typeof bn==="undefined"||bn.metaKey||bn.ctrlKey||bn.shiftKey||bn.altKey){return}bj=(bn.type+"");if(bj==="tap"||bj==="doubletap"||bj==="hold"||bj==="dragstart"||bj==="drag"||bj==="dragend"||bj==="mousemove"){bk="pointer";bl=bj}else{if(bj==="mousewheel"||bj==="DOMMouseScroll"){bk="pointer";bl="wheel"}else{bm=((bn.which||bn.key||bn.keyCode)+"").toLowerCase();bk=W.key(bm);bl=bj.toLowerCase();bl=bl.replace("key","")}}T.signals.onGameInput.dispatch(bn,bk,bl)}function k(bj){T.focused=false;T.signals.onFocusLost.dispatch(bj)}function a2(bj){T.focused=true;T.signals.onFocusGained.dispatch(bj)}function ah(bl){var bj,bk;T.screenWidth=$(window).width();T.screenHeight=$(window).height();T.screenViewableWidth=T.domElements.$game.width();T.screenViewableHeight=T.domElements.$game.height();if(a3){a3.resize()}if(aL===true){T.signals.onWindowResized.dispatch(T.screenWidth,T.screenHeight);bj=T.gameWidth=T.screenViewableWidth;bk=T.gameHeight=T.screenViewableHeight;$(T.renderer.domElement).css({top:T.screenOffsetTop,bottom:T.screenOffsetBottom,left:T.screenOffsetLeft,right:T.screenOffsetRight});T.renderer.setSize(bj,bk);T.renderTarget.width=bj;T.renderTarget.height=bk;T.cameraBG.aspect=T.camera.aspect=bj/bk;T.camera.updateProjectionMatrix();T.cameraBG.updateProjectionMatrix();a9.reset(T.renderTarget);aa()}}function aT(bl,bk,bj){aj(true);if(l.errorState!==true){l.generate(bl,bk,bj)}throw bl+" at "+bj+" in "+bk}function aD(bm){var bk,bj,bn,bl;bn=aU(bm);bl=Modernizr.prefixed(bn);return !!bl}function aU(bn){var bm=bn.split("-"),bj=bm.length,bl;if(bj==1){return bm[0]}bl=bn.charAt(0)=="-"?bm[0].charAt(0).toUpperCase()+bm[0].substring(1):bm[0];for(var bk=1;bk<bj;bk++){bl+=bm[bk].charAt(0).toUpperCase()+bm[bk].substring(1)}return bl}function X(bj){return bj.toLowerCase().replace(/\b[a-z]/g,function(bk){return bk.toUpperCase()})}function aK(bj){return bj instanceof $?bj.get(0):bj}function A(bj,bk){if(T.supports.pointerEvents){if(bk===true){bj.addClass("ignore-pointer-temporary")}else{bj.removeClass("ignore-pointer-temporary")}}else{if(bk===true){bj.on("tap.pointer doubletap.pointer hold.pointer dragstart.pointer drag.pointer, dragend.pointer",function(bl){bl.preventDefault();bl.stopPropagation();bj.stop(true).addClass("invisible");$(document.elementFromPoint(bl.clientX,bl.clientY)).trigger(bl);bj.stop(true).removeClass("invisible");return false})}else{bj.off(".pointer")}}}function ac(bm,bn,bk,bl){var bj=function(){if(typeof bn==="function"){bn.call(bk,bl)}};if(b(bl)!==true){bl=new Image()}bl.crossOrigin="";bl.src=bm;if(bl.complete){bj()}else{bl.onload=bj}return bl}function a0(bm){var bl,bn,bj,bp,bo,bk;bm=bm||{};bl=$(bm.element);bn=a5(bm.duration)?bm.duration:T.domFadeDuration;bj=a5(bm.opacity)?bm.opacity:0;bp=typeof bm.easing==="string"?bm.easing:T.domFadeEasing;bo=bm.callback;bl.each(function(){var bq=$(this),bs,br,bu,bv,bt,bw=function(){bq.removeClass("hiding");if(bj===0){bq.addClass(bt?"invisible":"hidden").css("opacity","").trigger("hidden");A(bs,false)}else{bq.trigger("shown");if(bj===1){bq.css("opacity","")}}if(typeof bo==="function"){bo()}};bv=bq.is(".invisible");bu=bq.is(".hiding, .hidden")||bv;br=bq.is(".collapsed");bt=bv||bm.invisible;bq.stop(true).removeClass("invisible hiding hidden collapsed");bs=bq.find("a, button").add(bq);if(bu===true||br===true||bm.initHidden===true){bq.fadeTo(0,0).css("height","")}if(bj===0){bq.addClass("hiding").trigger("hide");A(bs,true)}else{A(bs,false);bq.trigger("show")}bq.animate({opacity:bj},{duration:bn,easing:bp,complete:bw})})}function ay(bl){var bk,bm,bj,bo,bn;bl=bl||{};bk=$(bl.element);bj=typeof bl.show==="boolean"?bl.show:false;bm=a5(bl.duration)?bl.duration:T.domCollapseDuration;bo=typeof bl.easing==="string"?bl.easing:T.domCollapseEasing;bn=bl.callback;bk.each(function(){var bx=$(this),bq,bs,bp,bw,bv,bu,br=0,bt=function(){if(bj===true){bx.css("height","").trigger("shown")}else{bx.addClass(bv?"invisible":"hidden").trigger("hidden");A(bq,false)}if(typeof bn==="function"){bn()}};bw=bx.is(".invisible");bp=bx.is(".hiding, .hidden")||bw;bs=bx.is(".collapsed");bv=bw||bl.invisible;if(bs!==true&&(bp===true||bl.initHidden===true)){bx.css("height",0).css("opacity","");bs=true}if(bs===bj){bx.stop(true).removeClass("invisible hiding hidden collapsed");bq=bx.find("a, button").add(bx);if(bj===true){bx.placeholdme().appendTo("body");bu=bx.height();bx.css("height","");br=bx.height();bx.css("height",bu);bx.placeholdme("revert");A(bq,false);bx.trigger("show")}else{A(bq,true);bx.addClass("collapsed").trigger("hide")}bx.animate({height:br},{duration:bm,easing:bo,complete:bt})}})}function a4(){G.tasksStarted=[];G.tasksCompleted=[];T.signals.onWorkerReset.dispatch()}function r(bj){if(typeof bj==="string"&&bj.length>0&&G.tasksStarted.hasOwnProperty(bj)!==true){G.taskCount++;G.tasksStarted.push(bj);T.signals.onWorkerTaskStarted.dispatch(bj)}}function aS(bk){var bj=Y(G.tasksStarted,bk);if(bj!==-1){G.tasksStarted.splice(bj,1);G.tasksCompleted.push(bk);T.signals.onWorkerTaskCompleted.dispatch(bk);if(G.tasksStarted.length===0){T.signals.onWorkerTasksCompleted.dispatch()}}}function i(bn,bk,bs,bq){var bo,bl,br,bu,bj,bp,bt=true,bm;if(typeof bn!=="undefined"){if(typeof bn==="string"||bn.hasOwnProperty("length")===false){bn=[bn]}bn=bn.slice(0);if(typeof bs!=="string"||P.listLocations.hasOwnProperty(bs)){bs=P.listCount}P.listCount++;for(bo=0,bl=bn.length;bo<bl;bo++){br=bn[bo];bu=O(br);bj=Y(P.loading,bu);bp=Y(P.loaded,bu);if(bj===-1&&bp==-1){P.loading.push(bu);P.loadingListIDs.push(bs);r(bu);newLocations=true}if(bp===-1){bt=false}}P.loadingOrLoaded=P.loaded.concat(P.loading);P.listLocations[bs]=bn;if(typeof bk==="undefined"){bk=[]}else{if(typeof bk==="function"||bk.hasOwnProperty("length")===false){bk=[bk]}}P.listCallbacks[bs]=bk;if(typeof bq!=="string"){bq=P.tips[Math.max(0,Math.min(P.tips.length-1,Math.round(Math.random()*P.tips.length)-1))]}P.listMessages[bs]=bq;P.listLoaded[bs]=[];P.lists.push(bs);if(bt===true){aZ(bs)}else{V()}}}function V(){var bl,bk,bn,bj,bm;if(P.active===false&&P.lists.length>0){P.active=true;P.listCurrent=P.lists[0];bn=P.listLocations[P.listCurrent].slice(0);for(bl=0,bk=bn.length;bl<bk;bl+=1){bj=bn[bl];bm=O(bj);if(Y(P.loaded,bm)!==-1){m(bj)}else{if(Y(P.started,bm)===-1){P.started.push(bm);H(bj)}}}}else{P.listCurrent=undefined;T.signals.onLoadAllCompleted.dispatch()}}function H(bj){var bn,bl,bo,bm,bp=function(){m(bj,bm)},bk=function(bq){m(bj,bq)};if(typeof bj!=="undefined"){bo=bj.type||P.loadTypeBase;bn=O(bj);bl=aR(bn);if(bl===""){bn=w(bn)}if(bo==="image"||a6(bl)){bm=ac(bn,function(bq){bm=bq;bp()});af(bn,{data:bm})}else{if(bo==="model"||bo==="model_ascii"){if(typeof P.threeJSON==="undefined"){P.threeJSON=new THREE.JSONLoader(true)}P.threeJSON.load(bn,bk)}else{$LAB.script(bn).wait(bp)}}}}function m(br,bl){var bm,bj,bs,bk,bo,bp,bt,bq,bn;bt=O(br);bq=p(br);aS(bt);af(bt,{data:bl});N(bt);if(typeof T!=="undefined"){T.signals.onLoadItemCompleted.dispatch(bt)}for(bm=0,bj=P.lists.length;bm<bj;bm++){bs=P.lists[bm];bk=P.listLocations[bs];bp=Y(bk,br);if(bp!==-1){bo=P.listLoaded[bs];bk.splice(bp,bp!==-1?1:0);bo.push(br);if(bk.length===0){bn=bn||[];bn.push(bs)}}}if(typeof bn!=="undefined"){for(bm=0,bj=bn.length;bm<bj;bm++){aZ(bn[bm])}}}function aZ(bl){var bm,bk,bj,bo,bn;bn=Y(P.lists,bl);if(bn!==-1){P.lists.splice(bn,1)}bj=P.listCallbacks[bl];for(bm=0,bk=bj.length;bm<bk;bm++){bo=bj[bm];if(typeof bo!=="undefined"){bo.call(this)}}if(typeof T!=="undefined"){T.signals.onLoadListCompleted.dispatch(bl)}delete P.listLocations[bl];delete P.listCallbacks[bl];delete P.listMessages[bl];delete P.listLoaded[bl];P.active=false;V()}function N(bq){var bn,bk,bj,bp,bl,bm,bo=false;bq=a8(bq);for(bn=0,bk=bq.length;bn<bk;bn++){bj=bq[bn];bp=O(bj);bm=Y(P.loading,bp);if(bm!==-1){P.loadingListIDs.splice(bm,1);P.loading.splice(bm,1)}bl=Y(P.loaded,bp);if(bl===-1){P.loaded.push(bp);bo=true}}if(bo===true){P.loadingOrLoaded=P.loaded.concat(P.loading)}}function aG(bj,bl){var bm,bk;bm=O(bj);bk=Y(bl,bm);if(bk!==-1){return true}else{return false}}function aM(bj){return aG(bj,P.loadingOrLoaded)}function q(bj){return aG(bj,P.loaded)}function x(bj){return aG(bj,P.loading)}function p(bj){return bj.type||P.loadTypeBase}function O(bj){return bj.path||bj}function aR(bj){var bm,bl,bk="";bm=O(bj);bl=bm.lastIndexOf(".");if(bl!==-1){bk=bm.substr(bl+1).toLowerCase()}return bk}function w(bj){var bk=F(bj);bk=bk.replace(/\./g,"")+".js";return bk}function F(bj){var bl,bk;bl=O(bj);bk=bl.lastIndexOf(".");if(bk!==-1){bl=bl.substr(0,bk)}return bl}function a(bj){var bl,bk;bl=O(bj);bk=aR(bl);if(bk===""){return w(bl)}else{return F(bl)}}function o(bo){var bm,bj,bk,bl,bn;bk=bo.split(/[\\\/]/);for(bm=0,bj=bk.length;bm<bj;bm++){bl=bk[bm];bl=bl.replace(/[^\w\.-]+/g,"");if(bl===""){aT("Invalid asset cascade","Main","N/A");return}bk[bm]=bl}return bk}function aw(bo,bp){var br,bm,bn,bq,bk,bl,bj;bk=bn=s;br=O(bo);bm=o(br);for(bl=0,bj=bm.length;bl<bj;bl++){bn=bk;bq=bm[bl];bk=bn[bq];if(typeof bk==="undefined"){break}}bp=bp||1;if(typeof bk==="undefined"){if(bp===1){return aw(a(br),bp+1)}}return bk}function D(br,bp){var bt,bo,bq,bs,bl,bn,bj,bm,bk;if(bp instanceof bg){bl=bq=s;bt=O(br);bo=o(bt);for(bm=0,bk=bo.length;bm<bk;bm++){bq=bl;bs=bo[bm];bl=bq[bs]=bq[bs]||{}}if(bl instanceof bg&&bl.is_empty()===false){if(bp.is_empty()===false){bl.merge_asset_self(bp)}}else{bq[bs]=bl=bp}}return bl}function d(bj){var bk,bl;bk=aw(bj);bl=(bk instanceof bg)?bk.data:bk;return bl}function af(bl,bk){var bj,bn,bm=aw(bl);if(bm instanceof bg!==true||(bk&&typeof bk.data!=="undefined"&&bk.data!==bm.data)){bj=new bg(bl,bk);bn=bj.data}else{bn=bm.data}return bn}function ag(bm,bl){var bk,bj;bl=bl||aw(bm);if(bl instanceof bg){bl.ready=true;bl.wait=false;if(typeof T.signals!=="undefined"&&typeof T.signals.onAssetReady!=="undefined"){T.signals.onAssetReady.dispatch(bm)}}}function bb(bp,bo,bt,bs){var bl,bn,br,bm=[],bk=[],bj=[],bq=false;bp=a8(bp);bo=a8(bo);bn=function(bw,bv){var bu;bu=Y(bk,bw);if(bu!==-1){bk.splice(bu,1);bj.push(bw);if(bk.length===0&&bj.length===bp.length){if(bq===true){T.signals.onAssetReady.remove(bn);bq=false}br()}}else{if(bv!==true){bn(a(bw),true)}}};br=function(){var bv,bu,bw;for(bv=0,bu=bo.length;bv<bu;bv++){bw=bo[bv];bw.apply(this,bm)}if(bs instanceof bg&&bs.readyAutoUpdate===true){bs.on_ready()}};bl=function(){var bw,bv,bu,by,bx;for(bw=0,bv=bp.length;bw<bv;bw++){bu=bp[bw];by=O(bu);bx=aw(bu);if(bx instanceof bg){bm.push(bx.data)}if(bt===true){bk.push(by);if(bx instanceof bg&&bx.ready===true){bn(by)}else{if(bq===false){bq=true;T.signals.onAssetReady.add(bn)}}}}if(bt!==true||bp.length===0){br()}};i(bp,bl)}function bg(bl,bk){var bj=this;bk=bk||{};bk.path=bl;bj.merge_asset_self(bk,true);if(typeof bj.path!=="undefined"){bj=D(bj.path,bj);if(bj===this&&this.readyAutoUpdate===true&&(this.requirements.length===0||this.wait!==true)){this.on_ready()}if(this.requirements.length>0){bb(this.requirements,this.callbacksOnReqs,this.wait,this)}}return bj}bg.prototype=new Object();bg.prototype={constructor:bg,merge_asset_self:function(bk,bj){var bl;if(typeof bk!=="undefined"){this.path=bk.path;this.merge_asset_data_self(bk);if(typeof this.wait!=="boolean"||this.wait===false){if(bk.wait===true){this.wait=bk.wait}else{this.wait=false}}if(this.ready!==true){this.ready=false}if(typeof this.readyAutoUpdate!=="boolean"){if(bk.hasOwnProperty("readyAutoUpdate")){this.readyAutoUpdate=bk.readyAutoUpdate}else{this.readyAutoUpdate=true}}this.requirements=a8(this.requirements);this.callbacksOnReqs=a8(this.callbacksOnReqs);if(bj===true){this.requirements=this.requirements.concat(a8(bk.requirements));this.callbacksOnReqs=this.callbacksOnReqs.concat(a8(bk.callbacksOnReqs))}}},merge_asset_data_self:function(bk){var bj=bk.data;if(typeof bj!=="undefined"){if(typeof this.data==="undefined"||b(bj)){this.data=bj}else{at(bj,this.data)}}},is_empty:function(){var bj=true;if(typeof this.data!=="undefined"||(this.ready===false&&this.requirements.length>0)){bj=false}return bj},on_ready:function(){console.log("[ KAIOPUA ] Module / Asset Ready: "+this.path);ag(this.path,this)}};return s}(KAIOPUA||{}));