(function(f){function j(){this.priority=[]}function k(a){var b,c,e,d=-1,i,d=p(a);b=l[d];if(typeof b!=="undefined"){a=b.element;c=b.priority;e=b.queue;i=e.active;o.splice(d,1);l.splice(d,1);if(c===!0)d=f.index_of_value(e.priority,b),d!==-1&&e.priority.splice(d,1);else if(e.general===b)e.general=void 0;d=f.index_of_value(g,a);d!==-1&&q(h[d]);b===i&&typeof b.deactivate==="function"&&(e.priority.length===0||!m(b,e.priority[0]))&&!m(b,e.general)&&b.deactivate();e.priority.length===0&&typeof e.general===
"undefined"&&(d=f.index_of_value(h,e),d!==-1&&(h.splice(d,1),d>0&&d<g.length&&g.splice(d,1)),typeof b.last==="function"&&b.last())}}function r(a){var b=s(a),c,e,d;if(b instanceof j&&(e=b.active,d=t(e),a.force===!0||d!==!0)){k(e);if(b.priority.length>0)c=b.active=b.priority[0];else if(typeof b.general!=="undefined")c=b.active=b.general;if(typeof c!=="undefined")typeof e==="undefined"&&typeof c.first==="function"&&c.first(),a=c.$container,a.length>0&&a.is(":visible")!==!0&&(f.dom_fade({element:a,opacity:1}),
a.trigger("open")),typeof c.activate==="function"&&!m(c,e)&&c.activate()}}function q(a){var b,c=s(a);if(c instanceof j){typeof c.general!=="undefined"&&c.general!==c.active&&k(c.general);for(a=0,b=c.priority.length;a<b;a++)c.priority[a]!==c.active&&k(c.priority[a]);typeof c.active!=="undefined"&&k(c.active)}}function m(a,b){return typeof a!=="undefined"&&typeof b!=="undefined"&&a.element===b.element&&a.activate===b.activate&&a.deactivate===b.deactivate}function t(a){var b=!1;if(typeof a!=="undefined")if(a.priority===
!0)b=a.priority;else if(a=f.index_of_value(g,a.element),a!==-1)return t(h[a].active);return b}function p(a){var b,c=-1;typeof a!=="undefined"&&(b=f.dom_extract(a.element||a),typeof b!=="undefined"&&(c=f.index_of_value(o,b)),c===-1&&(a=a.item||a,typeof a!=="undefined"&&(c=f.index_of_value(l,a))));return c}function s(a){if(typeof a!=="undefined"){var b=a.queue||a;if(b instanceof j)return b;b=l[p(a)];if(typeof b!=="undefined")return b.queue;a=f.dom_extract(a.container||a);if(typeof a!=="undefined"&&
(a=f.index_of_value(g,a),a!==-1))return h[a]}}f.shared=f.shared||{};var n={},g=[],o=[],h=[],l=[],u=0;n.add=function(a){var b=f.dom_extract(a.element||a),c=$(b),e,d,i;if(c.length>0){a=b===a?{}:$.extend({},a);a.id=u++;a.element=b;a.$element=c;c=a.container=f.dom_extract(a.container);e=a.priority;a.$container=$(c);a.$container.length>0?(d=f.index_of_value(g,c),d===-1&&(g.push(c),d=g.length-1,h[d]=new j)):d=0;a.queue=h[d];if(e===!0){if(a.queue.priority.length===0||!m(a,a.queue.priority[a.queue.priority.length-
1]))a.queue.priority.push(a),i=!0}else if(!m(a,a.queue.general))a.queue.general=a,i=!0;i===!0&&(o.push(b),l.push(a),r(a.queue))}};n.remove=k;n.step=r;n.clear=q;g.push("nocontainer");h.push(new j);f.asset_register("js/kaiopua/ui/UIQueue.js",{data:n})})(KAIOPUA);
