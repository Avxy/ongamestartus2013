(function(d){var h=d.shared=d.shared||{},a={};d.asset_register("js/kaiopua/core/PropertyUpdater.js",{data:a});a.Instance=function(b){b=b||{};this.object=b.object;this.updating=!1;this.children=[]};a.Instance.prototype.start=function(){if(this.updating!==!0)this.updating=!0,this.parent instanceof a.Instance!==!0&&h.signals.onGameUpdated.add(this.update,this)};a.Instance.prototype.stop=function(){this.updating=!1;h.signals.onGameUpdated.remove(this.update,this);this.detach()};a.Instance.prototype.add=
function(b){var a,e,c,f=this.children,g,b=d.to_array(b);for(a=0,e=b.length;a<e;a++)c=b[a],d.index_of_value(f,c)===-1&&(f.push(c),c.updating===!0&&(g=!0)),c.parent=this;g===!0&&f.length>0&&this.start()};a.Instance.prototype.remove=function(b){var a,e,c,f,g=this.children;if(typeof b!=="undefined"){b=d.to_array(b);for(a=0,e=b.length;a<e;a++)f=b[a],c=d.index_of_value(g,f),c!==-1&&g.splice(c,1),f.parent=void 0;g.length===0&&this.stop()}else this.remove(g)};a.Instance.prototype.detach=function(){this.parent instanceof
a.Instance&&this.parent.remove(this)};a.Instance.prototype.update=function(){var a,d,e=this.children,c;this.step();for(a=0,d=e.length;a<d;a++)c=e[a],c.update.call(c),this.integrate(c);this.apply()};a.Instance.prototype.step=function(){};a.Instance.prototype.integrate=function(){};a.Instance.prototype.apply=function(){};Object.defineProperty(a.Instance.prototype,"parent",{get:function(){return this._parent},set:function(b){this._parent=b;this._parent instanceof a.Instance?h.signals.onGameUpdated.remove(this.update,
this):this.updating===!0&&h.signals.onGameUpdated.add(this.update,this)}})})(KAIOPUA);
