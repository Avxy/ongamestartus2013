(function(d){function m(){a.sceneBG.add(a.skybox);a.scene.add(a.world);a.player.respawn(a.scene,a.spawns.main);j.revert_change(a.cameraControls.options,!0);a.cameraControls.target=a.player;a.cameraControls.enabled=!0;a.cameraControls.controllable=!1;d.ready=!1;d.asset_require(["js/kaiopua/ui/UI.js","js/kaiopua/characters/Speaker.js",{path:a.pathToAssets+"speakers.js",type:"json"}],function(b,c,e){g=b;h=c;a.speakersLoading=[];c=a.spawns.random.slice(0);for(i=0,il=e.length;i<il;i++)b=e[i],b.spawn=d.array_random_value_remove(c),
n(b)})}function n(b){d.array_cautious_add(a.speakersLoading,b);d.asset_require([{path:a.pathToAssets+(b.geometry||b.options.paths.assets)+".js",type:"model"}],function(c){var f;b.geometry=c;c=b.options=b.options||{};f=c.dialogues=c.dialogues||{},c=f;(c.name=c.name||{}).callback=function(){g.show_speaker(b)};c=new h.Instance(b);c.face_local_direction((new THREE.Vector3(Math.random()*2-1,0,Math.random()*2-1)).normalize());c.respawn(a.scene,b.spawn);d.array_cautious_remove(a.speakersLoading,b);if(a.speakersLoading.length===
0)delete a.speakersLoading,d.ready=!0})}function o(){}function p(){a.scene.remove(a.player);a.scene.remove(a.world);a.sceneBG.remove(a.skybox)}function q(){}var a=d.shared=d.shared||{},e={},k,l,j,g,h;d.asset_register("js/kaiopua/sections/Start.js",{data:e,requirements:["js/kaiopua/core/Model.js","js/kaiopua/characters/Player.js","js/kaiopua/utils/ObjectHelper.js",{path:a.pathToAssets+"spawn_main.js",type:"model"},{path:a.pathToAssets+"spawn_random.js",type:"model"},{path:a.pathToAssets+"hero.js",
type:"model"}],callbacksOnReqs:function(b,c,d,g,f,h){k=b;l=c;j=d;e.show=m;e.hide=o;e.remove=p;e.update=q;b=new k.Instance({geometry:g,center:!0});a.spawns.main=b.position.clone();a.spawns.random=a.spawns.random||[];c=f.vertices;for(f=0,b=c.length;f<b;f++)a.spawns.random.push(c[f].clone());a.player=new l.Instance({geometry:h,options:{animation:{names:{idleAlt:"idle_alt"},durations:{idle:600,idleAlt:1500,jump:600,jumpStart:175,jumpEnd:300}}}})},wait:!0})})(KAIOPUA);
